/* GroScales – flat, premium, micro-contrast */

:root{
  --surface-0:#f6f7f8;
  --surface-1:#ffffff;
  --surface-2:#f3f4f6;
  --surface-rail:#f1f3f5;

  --text-primary:#0e1115;
  --text-secondary:#6b7280;
  --text-muted:#8a93a3;

  --line:#e6e8ec;
  --line-strong:#dadde3;

  --shadow-soft:0 1px 3px rgba(0,0,0,.05);
  --shadow-subtle:0 1px 2px rgba(0,0,0,.04);

  --accent:#2a74ff;
}

body[data-theme="dark"]{
  --surface-0:#0f1215;
  --surface-1:#111417;
  --surface-2:#15191d;
  --surface-rail:#12161a;

  --text-primary:#e9edf2;
  --text-secondary:#9aa3b1;
  --text-muted:#9aa3b1;

  --line:#22272e;
  --line-strong:#2a3139;

  --shadow-soft:0 1px 3px rgba(0,0,0,.45);
  --shadow-subtle:0 1px 2px rgba(0,0,0,.35);

  --accent:#5da0ff;
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  color:var(--text-primary);
  background:var(--surface-0);
  font:500 14px/1.45 ui-sans-serif, system-ui, -apple-system,"Segoe UI", Inter, Roboto, Arial;
}

.p-shell{min-height:100vh;display:flex;flex-direction:column}
.matte{backdrop-filter:blur(6px) saturate(110%)}

/* Topbar */
.p-topbar{
  position:sticky;top:0;z-index:20;height:54px;
  display:flex;align-items:center;justify-content:center;
  border-bottom:1px solid var(--line);
  background:color-mix(in srgb, var(--surface-1) 88%, transparent);
}
.brand-center{font-weight:750;letter-spacing:.2px}
.left-toggle{position:absolute;left:10px;top:50%;transform:translateY(-50%)}
.top-actions{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;align-items:center;gap:10px}

/* Buttons / chips */
.icon-btn{
  height:32px;width:32px;display:grid;place-items:center;
  border:1px solid var(--line);border-radius:8px;background:var(--surface-1);
  transition:background .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.icon-btn:hover{background:color-mix(in srgb, var(--surface-1) 92%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 18%, transparent)}

.btn-outline{
  height:32px;padding:0 12px;border:1px solid var(--line);border-radius:8px;
  background:var(--surface-1);color:var(--text-primary);
  transition:background .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.btn-outline.sm{height:28px;font-size:12px}
.btn-outline:hover{background:color-mix(in srgb, var(--surface-1) 94%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 14%, transparent)}

.btn-primary{
  height:32px;padding:0 12px;border:0;border-radius:8px;color:#fff;background:var(--accent);
  transition:filter .15s cubic-bezier(.2,.6,.2,1);
}
.btn-primary:hover{filter:brightness(0.96)}

/* Copilot – static accent with subtle hover edge */
.btn-copilot{
  position:relative;height:32px;padding:0 12px;border:1px solid var(--line);border-radius:8px;
  background:var(--surface-1);display:inline-flex;align-items:center;gap:8px;color:var(--text-primary);
  box-shadow:0 0 0 1px color-mix(in srgb, var(--accent) 22%, transparent) inset,
             0 2px 8px rgba(70,120,255,.10);
  transition:box-shadow .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1);
}
.btn-copilot .copilot-static{
  position:absolute;inset:0;border-radius:8px;pointer-events:none;opacity:.22;
  background:linear-gradient(90deg,#7c9eff 0%,#ff77b7 50%,#5be4ff 100%);
  mix-blend:soft-light;
}
.btn-copilot:hover{
  box-shadow:0 0 0 1px color-mix(in srgb, var(--accent) 30%, transparent) inset,
             0 0 0 2px color-mix(in srgb, var(--accent) 16%, transparent),
             0 4px 12px rgba(70,120,255,.12);
}

/* Small icon chip used for copy action */
.icon-chip{
  height:22px;min-width:22px;padding:0 6px;display:inline-flex;align-items:center;justify-content:center;
  border:1px solid var(--line);border-radius:7px;background:var(--surface-1);cursor:pointer;
  transition:background .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1);
}
.icon-chip:hover{background:color-mix(in srgb, var(--surface-1) 93%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 14%, transparent)}
.icon-chip.is-disabled{opacity:.45;cursor:default}
.icon-chip.is-disabled:hover{box-shadow:none;background:var(--surface-1)}

/* Profile menu */
.profile-btn{all:unset;cursor:pointer}
.avatar{width:28px;height:28px;border-radius:50%;display:grid;place-items:center;font-weight:700;border:1px solid var(--line)}
.avatar.small{width:28px;height:28px}
.menu{
  position:absolute;right:0;margin-top:8px;padding:6px;background:var(--surface-1);
  border:1px solid var(--line-strong);border-radius:10px;box-shadow:var(--shadow-soft);
}
.menu-item{display:flex;align-items:center;gap:8px;padding:8px 10px;width:180px;border-radius:8px;background:transparent;border:0;color:inherit;cursor:pointer}
.menu-item:hover{background:color-mix(in srgb, var(--surface-1) 92%, var(--line))}
.menu-sep{height:1px;background:var(--line);margin:4px 6px}
.menu-item.danger{color:#e46a6a}

/* Grid */
.p-work.grid{
  display:grid;gap:0;padding:14px;
  grid-template-columns: 220px 360px 1fr 300px;
  transition:grid-template-columns .2s cubic-bezier(.2,.6,.2,1);
  height: calc(100vh - 54px);
}
.p-work.grid.rail-closed{grid-template-columns: 60px 360px 1fr 300px}

/* Sidebar */
.rail{
  border-right:1px solid var(--line);
  background:var(--surface-rail);
  padding:8px 6px;display:flex;flex-direction:column;gap:6px;
}
.rail.collapsed .rail-item span{display:none}
.rail nav{display:flex;flex-direction:column;gap:4px}
.rail-item{
  display:flex;align-items:center;gap:10px;height:34px;padding:0 8px;color:inherit;text-decoration:none;border-radius:8px;border:1px solid transparent;
  transition:background .18s cubic-bezier(.2,.6,.2,1), border-color .18s cubic-bezier(.2,.6,.2,1), transform .18s cubic-bezier(.2,.6,.2,1);
}
.rail-item:hover{background:color-mix(in srgb, var(--surface-1) 92%, var(--line))}
.rail-item.active{border-color:var(--accent)}
.rail-foot{margin-top:auto;padding-top:6px;border-top:1px solid var(--line)}

/* Panels */
.panel{
  background:var(--surface-1);
  border-left:1px solid var(--line);
  display:flex;flex-direction:column;min-height:0;
}
.list{border-left:1px solid var(--line)}
.details{border-right:1px solid var(--line);overflow:auto;min-height:0}

/* List column */
.list{display:flex;flex-direction:column}
.list-head{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid var(--line)}
.list-head .h{font-weight:750}
.list-head-actions{display:flex;align-items:center;gap:8px}

.search{
  display:flex;align-items:center;gap:8px;margin:8px 10px;height:32px;border:1px solid var(--line);background:var(--surface-1);
  padding:0 8px;border-radius:8px;box-shadow:var(--shadow-subtle);
}
.search input{border:0;outline:none;background:transparent;color:inherit;width:100%}

.rows{list-style:none;margin:0;padding:6px}
.row{
  display:flex;align-items:center;gap:10px;padding:10px 8px;border-radius:8px;cursor:pointer;border:1px solid transparent;
  transition:background .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.row:hover{background:color-mix(in srgb, var(--surface-1) 93%, var(--line)); box-shadow:0 1px 3px rgba(0,0,0,.04)}
.row.selected{border-color:var(--accent);background:color-mix(in srgb, var(--surface-1) 96%, var(--line))}
.meta .name{font-weight:600}
.meta .sub{color:var(--text-secondary);font-size:12px}

/* Thread */
.thread{display:flex;flex-direction:column;min-height:0}
.thread-title{padding:10px;border-bottom:1px solid var(--line);font-weight:750}
.who{display:flex;align-items:center;gap:10px}
.who-name{font-weight:700}
.who-sub{color:var(--text-secondary);font-size:12px}

/* Messages */
.messages{
  flex:1 1 auto;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px;min-height:0;
  background:var(--surface-1);
}
.bubble{
  max-width:min(70ch, 64%);
  display:inline-block;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--line);
  background:color-mix(in srgb, var(--surface-1) 94%, var(--line));
  box-shadow:var(--shadow-subtle);
  transition:box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.bubble:hover{box-shadow:0 1px 3px rgba(0,0,0,.06)}
.bubble.mine{
  align-self:flex-end;
  background:color-mix(in srgb, var(--surface-2) 92%, var(--line));
  border-color:color-mix(in srgb, var(--accent) 24%, var(--line));
}
.bubble .stamp{font-size:11px;color:var(--text-secondary);margin-top:4px}

/* Composer pinned bottom */
.composer{
  flex-shrink:0;padding:8px 10px 10px;border-top:1px solid var(--line);background:var(--surface-1);
  display:grid;grid-template-columns: 1fr auto auto auto;gap:8px;position:sticky;bottom:0;
  box-shadow:0 -2px 8px rgba(0,0,0,.03);
}
.composer input{
  height:36px;border:1px solid var(--line);border-radius:8px;padding:0 10px;background:var(--surface-1);outline:none;
  transition:border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.composer input:focus{border-color:color-mix(in srgb, var(--accent) 35%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 18%, transparent)}

/* Details */
.section{border-bottom:1px solid var(--line)}
.section:last-child{border-bottom:0}
.section-title{padding:10px;font-weight:750;color:var(--text-primary)}
.kv{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border-top:1px solid var(--line)}
.kv label{color:var(--text-secondary);font-size:12px}
.copy-row{display:flex;align-items:center;gap:8px}
.placeholder{color:var(--text-muted);font-style:normal}

/* Tags (visible in both themes) */
.tag-row{display:flex;gap:8px;padding:8px 10px}
.tag{
  --t-bg:rgba(0,0,0,.06);--t-fg:#111;
  padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--line);background:var(--t-bg);color:var(--t-fg);
}
.tag-blue{--t-bg:rgba(42,116,255,.12);--t-fg:#2a74ff}
.tag-pink{--t-bg:rgba(244,63,94,.14);--t-fg:#e94b6b}
.tag-green{--t-bg:rgba(34,197,94,.14);--t-fg:#22c55e}
body[data-theme="dark"] .tag{--t-fg:#cdd6f4;border-color:color-mix(in srgb, var(--t-fg) 10%, transparent)}
body[data-theme="dark"] .tag-blue{--t-bg:rgba(93,160,255,.18);--t-fg:#9bc3ff}
body[data-theme="dark"] .tag-pink{--t-bg:rgba(255,120,160,.20);--t-fg:#ffb4c8}
body[data-theme="dark"] .tag-green{--t-bg:rgba(56,214,124,.20);--t-fg:#9df3c0}

/* De-boxify */
.panel,.rail,.p-topbar{box-shadow:none}

/* ---- uploads page ---- */
.p-uploads{padding:16px; display:flex; flex-direction:column; gap:16px}
.uploads-head{display:flex; align-items:center; justify-content:space-between}
.uploads-head .title{font-weight:700}
.tabs{display:flex; gap:6px}
.tab{height:30px;padding:0 10px;border:1px solid var(--line);background:var(--panel);border-radius:8px}
.tab.active{border-color:var(--line-strong); background:color-mix(in srgb, var(--panel) 90%, var(--line))}
.uploads-input textarea{width:100%; height:160px; border:1px solid var(--line); border-radius:8px; padding:10px; background:var(--panel); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
.filepick{display:inline-flex; align-items:center; gap:8px; border:1px dashed var(--line); padding:10px 12px; border-radius:8px; cursor:pointer}
.filepick input{display:none}
.hint{color:var(--muted); font-size:12px}
.uploads-actions{display:flex; align-items:center; gap:12px}
.uploads-actions .ok{color:#2e7d32; font-weight:600}
.uploads-actions .err{color:#c62828; font-weight:600}
.uploads-preview .label{font-weight:700; margin:2px 0 8px}
.table{border:1px solid var(--line); border-radius:8px; overflow:hidden}
.thead,.tr{display:grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr))}
.thead{background:color-mix(in srgb, var(--panel) 92%, var(--line)); border-bottom:1px solid var(--line)}
.th,.td{padding:8px 10px; border-right:1px solid var(--line)}
.tr:not(:last-child){border-bottom:1px solid var(--line)}
/* ---------- Uploads page ---------- */
.uploads-zone{
  margin-top:12px; padding:20px; border:1px dashed var(--line);
  background:var(--panel); border-radius:12px; display:flex; gap:12px; align-items:center;
  transition: border-color .2s ease, background-color .2s ease, box-shadow .2s ease;
  cursor:pointer;
}
.uploads-zone.is-over{ border-color:var(--line-strong); box-shadow:0 1px 4px rgba(0,0,0,.05) }
.uploads-zone.is-busy{ opacity:.75; pointer-events:none }
.uploads-zone__icon{ color:var(--muted) }
.uploads-zone__title{ font-weight:700 }
.uploads-zone__hint{ color:var(--muted); font-size:12px }

.uploads-summary{
  margin-top:12px; padding:10px; border:1px solid var(--line); border-radius:10px;
  display:flex; gap:16px; background:color-mix(in srgb, var(--panel) 92%, var(--line));
}
.uploads-summary__row{ display:flex; gap:6px; color:var(--text-secondary) }
.uploads-summary__row strong{ color:var(--text-primary) }
.uploads-summary__error{ margin-left:auto; color:#e46a6a; font-weight:600 }

.uploads-history{ margin-top:16px }
.uploads-history__head{ font-weight:700; margin-bottom:8px }

.uploads-table{
  border:1px solid var(--line); border-radius:10px; overflow:hidden;
}
.uploads-table__row{
  display:grid; grid-template-columns: 1fr 200px 80px 80px 80px 110px 44px;
  gap:12px; align-items:center; padding:10px 12px; border-top:1px solid var(--line);
}
.uploads-table__row--head{
  background:color-mix(in srgb, var(--panel) 94%, var(--line));
  border-top:none; color:var(--text-secondary); font-size:12px; font-weight:600;
}
.uploads-table__row .num{ text-align:right }
.uploads-table__row .act{ display:flex; justify-content:flex-end }
.uploads-empty{ padding:14px; color:var(--muted) }

.filecell{ display:flex; align-items:center; gap:8px; min-width:0 }
.truncate{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

/* status pills – soft and readable in both themes */
.pill{
  display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px;
  border:1px solid var(--line);
}
.pill--success{ color:#1f7a2e; background:rgba(36, 164, 80, .12); border-color:rgba(36,164,80,.28)}
.pill--partial{ color:#7a6a1f; background:rgba(242, 211, 73, .14); border-color:rgba(242,211,73,.30)}
.pill--failed{ color:#8b2b2b; background:rgba(228,106,106,.14); border-color:rgba(228,106,106,.32)}

body[data-theme="dark"] .pill--success{ color:#8bd9a5; background:rgba(36,164,80,.12); border-color:rgba(36,164,80,.32)}
body[data-theme="dark"] .pill--partial{ color:#e6d27a; background:rgba(242,211,73,.12); border-color:rgba(242,211,73,.28)}
body[data-theme="dark"] .pill--failed{ color:#ffb0b0; background:rgba(228,106,106,.12); border-color:rgba(228,106,106,.28)}

.icon-btn.subtle{
  height:28px; width:28px; display:grid; place-items:center;
  border:1px solid var(--line); border-radius:8px; background:var(--panel);
}
.icon-btn.subtle[disabled]{ opacity:.45; cursor:not-allowed }
.icon-btn.subtle:hover{ background:color-mix(in srgb, var(--panel) 88%, var(--line)) }
