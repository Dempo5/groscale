/* GroScales – flat, premium, micro-contrast */

/* ---------- Tokens ---------- */
:root{
  /* new semantic tokens */
  --surface-0:#f6f7f8;
  --surface-1:#ffffff;
  --surface-2:#f3f4f6;
  --surface-rail:#f1f3f5;

  --text-primary:#0e1115;
  --text-secondary:#6b7280;
  --text-muted:#8a93a3;

  --line:#e6e8ec;
  --line-strong:#dadde3;

  --shadow-soft:0 1px 3px rgba(0,0,0,.05);
  --shadow-subtle:0 1px 2px rgba(0,0,0,.04);

  --accent:#2a74ff;
  --danger:#e5484d;

  /* legacy aliases (so existing UI keeps working) */
  --bg: var(--surface-0);
  --panel: var(--surface-1);
  --ink: var(--text-primary);
  --muted: var(--text-muted);
  --blue: var(--accent);
  --shadow: var(--shadow-subtle);
}

body[data-theme="dark"]{
  --surface-0:#0f1215;
  --surface-1:#111417;
  --surface-2:#15191d;
  --surface-rail:#12161a;

  --text-primary:#e9edf2;
  --text-secondary:#9aa3b1;
  --text-muted:#9aa3b1;

  --line:#22272e;
  --line-strong:#2a3139;

  --shadow-soft:0 1px 3px rgba(0,0,0,.45);
  --shadow-subtle:0 1px 2px rgba(0,0,0,.35);

  --accent:#5da0ff;
  --danger:#ff6b6b;
}

/* ---------- Base ---------- */
*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;
  color:var(--text-primary);
  background:var(--surface-0);
  font:500 14px/1.45 ui-sans-serif, system-ui, -apple-system,"Segoe UI", Inter, Roboto, Arial;
}

.p-shell{min-height:100vh;display:flex;flex-direction:column}
.matte{backdrop-filter:blur(6px) saturate(110%)}

/* ---------- Topbar ---------- */
.p-topbar{
  position:sticky;top:0;z-index:20;height:54px;
  display:flex;align-items:center;justify-content:center;
  border-bottom:1px solid var(--line);
  background:color-mix(in srgb, var(--surface-1) 88%, transparent);
}
.brand-center{font-weight:750;letter-spacing:.2px}
.left-toggle{position:absolute;left:10px;top:50%;transform:translateY(-50%)}
.top-actions{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;align-items:center;gap:10px}

/* ---------- Buttons / chips ---------- */
.icon-btn{
  height:32px;width:32px;display:grid;place-items:center;
  border:1px solid var(--line);border-radius:8px;background:var(--surface-1);
  transition:background .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.icon-btn:hover{background:color-mix(in srgb, var(--surface-1) 92%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 18%, transparent)}

.btn,
.btn-outline{
  height:32px;padding:0 12px;border:1px solid var(--line);border-radius:8px;
  background:var(--surface-1);color:var(--text-primary);
  transition:background .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.btn.sm,.btn-outline.sm{height:28px;font-size:12px}
.btn:hover,.btn-outline:hover{background:color-mix(in srgb, var(--surface-1) 94%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 14%, transparent)}

.btn-primary{
  height:32px;padding:0 12px;border:0;border-radius:8px;color:#fff;background:var(--accent);
  transition:filter .15s cubic-bezier(.2,.6,.2,1);
}
.btn-primary:hover{filter:brightness(0.96)}

/* Copilot – static accent with subtle hover edge */
.btn-copilot{
  position:relative;height:32px;padding:0 12px;border:1px solid var(--line);border-radius:8px;
  background:var(--surface-1);display:inline-flex;align-items:center;gap:8px;color:var(--text-primary);
  box-shadow:0 0 0 1px color-mix(in srgb, var(--accent) 22%, transparent) inset,
             0 2px 8px rgba(70,120,255,.10);
  transition:box-shadow .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1);
}
.btn-copilot .copilot-static{
  position:absolute;inset:0;border-radius:8px;pointer-events:none;opacity:.22;
  background:linear-gradient(90deg,#7c9eff 0%,#ff77b7 50%,#5be4ff 100%);
  mix-blend:soft-light;
}
.btn-copilot:hover{
  box-shadow:0 0 0 1px color-mix(in srgb, var(--accent) 30%, transparent) inset,
             0 0 0 2px color-mix(in srgb, var(--accent) 16%, transparent),
             0 4px 12px rgba(70,120,255,.12);
}

/* Small icon chip used for copy action */
.icon-chip{
  height:22px;min-width:22px;padding:0 6px;display:inline-flex;align-items:center;justify-content:center;
  border:1px solid var(--line);border-radius:7px;background:var(--surface-1);cursor:pointer;
  transition:background .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1);
}
.icon-chip:hover{background:color-mix(in srgb, var(--surface-1) 93%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 14%, transparent)}
.icon-chip.is-disabled{opacity:.45;cursor:default}
.icon-chip.is-disabled:hover{box-shadow:none;background:var(--surface-1)}

/* ---------- Form bits used in tables/search ---------- */
.hint{font-size:12px;color:var(--text-secondary)}
.label{font-size:12px;color:var(--text-secondary)}
.input{
  height:32px;border:1px solid var(--line);border-radius:8px;
  background:var(--surface-1);color:inherit;padding:0 10px;outline:none;
  transition:border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.input:focus{border-color:color-mix(in srgb, var(--accent) 35%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 18%, transparent)}

/* ---------- Profile menu ---------- */
.profile-btn{all:unset;cursor:pointer}
.avatar{width:28px;height:28px;border-radius:50%;display:grid;place-items:center;font-weight:700;border:1px solid var(--line)}
.avatar.small{width:28px;height:28px}
.menu{
  position:absolute;right:0;margin-top:8px;padding:6px;background:var(--surface-1);
  border:1px solid var(--line-strong);border-radius:10px;box-shadow:var(--shadow-soft);
}
.menu-item{display:flex;align-items:center;gap:8px;padding:8px 10px;width:180px;border-radius:8px;background:transparent;border:0;color:inherit;cursor:pointer}
.menu-item:hover{background:color-mix(in srgb, var(--surface-1) 92%, var(--line))}
.menu-sep{height:1px;background:var(--line);margin:4px 6px}
.menu-item.danger{color:#e46a6a}

/* ---------- Grid ---------- */
.p-work.grid{
  display:grid;gap:0;padding:14px;
  grid-template-columns: 220px 360px 1fr 300px;
  transition:grid-template-columns .2s cubic-bezier(.2,.6,.2,1);
  height: calc(100vh - 54px);
}
.p-work.grid.rail-closed{grid-template-columns: 60px 360px 1fr 300px}

/* ---------- Sidebar ---------- */
.rail{
  border-right:1px solid var(--line);
  background:var(--surface-rail);
  padding:8px 6px;display:flex;flex-direction:column;gap:6px;
}
.rail.collapsed .rail-item span{display:none}
.rail nav{display:flex;flex-direction:column;gap:4px}
.rail-item{
  display:flex;align-items:center;gap:10px;height:34px;padding:0 8px;color:inherit;text-decoration:none;border-radius:8px;border:1px solid transparent;
  transition:background .18s cubic-bezier(.2,.6,.2,1), border-color .18s cubic-bezier(.2,.6,.2,1), transform .18s cubic-bezier(.2,.6,.2,1);
}
.rail-item:hover{background:color-mix(in srgb, var(--surface-1) 92%, var(--line))}
.rail-item.active{border-color:var(--accent)}
.rail-foot{margin-top:auto;padding-top:6px;border-top:1px solid var(--line)}

/* ---------- Panels ---------- */
.panel{
  background:var(--surface-1);
  border-left:1px solid var(--line);
  display:flex;flex-direction:column;min-height:0;
}
.list{border-left:1px solid var(--line)}
.details{border-right:1px solid var(--line);overflow:auto;min-height:0}

/* ---------- List column ---------- */
.list{display:flex;flex-direction:column}
.list-head{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid var(--line)}
.list-head .h{font-weight:750}
.list-head-actions{display:flex;align-items:center;gap:8px}

.search{
  display:flex;align-items:center;gap:8px;margin:8px 10px;height:32px;border:1px solid var(--line);background:var(--surface-1);
  padding:0 8px;border-radius:8px;box-shadow:var(--shadow-subtle);
}
.search input{border:0;outline:none;background:transparent;color:inherit;width:100%}

.rows{list-style:none;margin:0;padding:6px}
.row{
  display:flex;align-items:center;gap:10px;padding:10px 8px;border-radius:8px;cursor:pointer;border:1px solid transparent;
  transition:background .15s cubic-bezier(.2,.6,.2,1), border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.row:hover{background:color-mix(in srgb, var(--surface-1) 93%, var(--line)); box-shadow:0 1px 3px rgba(0,0,0,.04)}
.row.selected{border-color:var(--accent);background:color-mix(in srgb, var(--surface-1) 96%, var(--line))}
.meta .name{font-weight:600}
.meta .sub{color:var(--text-secondary);font-size:12px}

/* ---------- Thread ---------- */
.thread{display:flex;flex-direction:column;min-height:0}
.thread-title{padding:10px;border-bottom:1px solid var(--line);font-weight:750}
.who{display:flex;align-items:center;gap:10px}
.who-name{font-weight:700}
.who-sub{color:var(--text-secondary);font-size:12px}

/* ---------- Messages ---------- */
.messages{
  flex:1 1 auto;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px;min-height:0;
  background:var(--surface-1);
}
.bubble{
  max-width:min(70ch, 64%);
  display:inline-block;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--line);
  background:color-mix(in srgb, var(--surface-1) 94%, var(--line));
  box-shadow:var(--shadow-subtle);
  transition:box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.bubble:hover{box-shadow:0 1px 3px rgba(0,0,0,.06)}
.bubble.mine{
  align-self:flex-end;
  background:color-mix(in srgb, var(--surface-2) 92%, var(--line));
  border-color:color-mix(in srgb, var(--accent) 24%, var(--line));
}
.bubble .stamp{font-size:11px;color:var(--text-secondary);margin-top:4px}

/* ---------- Composer pinned bottom ---------- */
.composer{
  flex-shrink:0;padding:8px 10px 10px;border-top:1px solid var(--line);background:var(--surface-1);
  display:grid;grid-template-columns: 1fr auto auto auto;gap:8px;position:sticky;bottom:0;
  box-shadow:0 -2px 8px rgba(0,0,0,.03);
}
.composer input{
  height:36px;border:1px solid var(--line);border-radius:8px;padding:0 10px;background:var(--surface-1);outline:none;
  transition:border-color .15s cubic-bezier(.2,.6,.2,1), box-shadow .15s cubic-bezier(.2,.6,.2,1);
}
.composer input:focus{border-color:color-mix(in srgb, var(--accent) 35%, var(--line)); box-shadow:0 0 0 2px color-mix(in srgb, var(--accent) 18%, transparent)}

/* ---------- Details ---------- */
.section{border-bottom:1px solid var(--line)}
.section:last-child{border-bottom:0}
.section-title{padding:10px;font-weight:750;color:var(--text-primary)}
.kv{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border-top:1px solid var(--line)}
.kv label{color:var(--text-secondary);font-size:12px}
.copy-row{display:flex;align-items:center;gap:8px}
.placeholder{color:var(--text-muted);font-style:normal}

/* ---------- Tags (visible in both themes) ---------- */
.tag-row{display:flex;gap:8px;padding:8px 10px}
.tag{
  --t-bg:rgba(0,0,0,.06);--t-fg:#111;
  padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--line);background:var(--t-bg);color:var(--t-fg);
}
.tag-blue{--t-bg:rgba(42,116,255,.12);--t-fg:#2a74ff}
.tag-pink{--t-bg:rgba(244,63,94,.14);--t-fg:#e94b6b}
.tag-green{--t-bg:rgba(34,197,94,.14);--t-fg:#22c55e}
body[data-theme="dark"] .tag{--t-fg:#cdd6f4;border-color:color-mix(in srgb, var(--t-fg) 10%, transparent)}
body[data-theme="dark"] .tag-blue{--t-bg:rgba(93,160,255,.18);--t-fg:#9bc3ff}
body[data-theme="dark"] .tag-pink{--t-bg:rgba(255,120,160,.20);--t-fg:#ffb4c8}
body[data-theme="dark"] .tag-green{--t-bg:rgba(56,214,124,.20);--t-fg:#9df3c0}

/* De-boxify */
.panel,.rail,.p-topbar{box-shadow:none}

/* =================================================================== */
/*                          Uploads + Product                          */
/* =================================================================== */

/* Page container (structure unchanged) */
.p-uploads{ padding:16px 18px 24px; max-width:1280px; margin:0 auto; }

/* Header / breadcrumb */
.uploads-header{ display:flex; align-items:flex-start; gap:14px; }
.back-link{
  all:unset; cursor:pointer; color:#9CA3AF;
  font-weight:600; padding:4px 6px; border-radius:8px;
  transition: color .18s cubic-bezier(.2,.6,.2,1),
              transform .18s cubic-bezier(.2,.6,.2,1),
              background .18s cubic-bezier(.2,.6,.2,1);
}
.back-link:hover{
  color:#2563EB; transform: translateX(-2px);
  background: color-mix(in srgb, var(--panel) 92%, var(--line));
}
.title-wrap{ display:flex; flex-direction:column; gap:4px }
.crumbs{ display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12.5px; margin:6px 0 8px; }
.crumb-back{ all:unset; cursor:pointer; color:#9CA3AF; font-weight:500; transition:color .15s ease, transform .15s ease; }
.crumb-back:hover{ color:#2563EB; transform:translateX(-1px); }
.crumb-sep{ opacity:.5 }
.crumb-here{ color:var(--ink) }
.page-title{ font-size:20px; line-height:1.25; font-weight:700 }

/* Shared card shell */
.u-card, .card{
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 14px;
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
}
.card:hover{ box-shadow:0 4px 12px rgba(0,0,0,.06); }
.card-head{ padding:10px 12px; border-bottom:1px solid var(--line); font-weight:700 }

/* Dropzone (product card style) */
.dropcard{
  display:block; max-width:760px; margin:0 auto;
  border-radius:16px;
  border:1px solid color-mix(in srgb, var(--line) 70%, #000 0%);
  background: var(--panel);
  box-shadow:0 2px 8px rgba(0,0,0,.04);
  transition: box-shadow .2s ease, border-color .2s ease, background .2s ease;
  padding:28px; text-align:center;
}
.dropcard:hover{
  border-color: color-mix(in srgb, var(--line-strong) 80%, #000 0%);
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--panel) 98%, #fff 2%) 0%,
    color-mix(in srgb, var(--panel) 100%, transparent) 100%
  );
  box-shadow:0 6px 16px rgba(0,0,0,.06);
}
.dropcard.drag{
  outline:2px solid color-mix(in srgb, var(--blue) 60%, transparent);
  background: color-mix(in srgb, var(--panel) 90%, var(--blue) 10%);
}
.dropcard [role="button"]{ cursor:pointer }

.upl-icon{
  width:48px; height:48px; opacity:.8;
  color:var(--muted); margin:2px auto 10px; display:block;
  transition: transform .18s ease;
}
.dropcard.drag .upl-icon{ transform:scale(1.03); }

.drop-head{ font-weight:600; color:var(--ink) }
.drop-sub{ color:var(--muted); font-size:13px; margin-top:2px }
.drop-helper{ text-align:center; margin-top:10px; color:var(--muted); font-size:12.5px }

.max-hint{
  text-align:center; margin-top:10px;
  color:var(--muted); font-size:12px;
}

/* History table */
.history{ margin-top:18px; }
.table-wrap{ width:100%; overflow:auto }
.u-table{ width:100%; border-collapse:collapse; font-size:13.5px; }
.u-table thead th{
  position:sticky; top:16px; z-index:1;
  background: color-mix(in srgb, var(--panel) 92%, transparent);
  backdrop-filter:saturate(120%) blur(4px);
  text-transform:uppercase; letter-spacing:.02em;
  color:var(--muted); font-weight:600;
  padding:8px 10px; text-align:left;
  border-bottom:1px solid color-mix(in srgb, var(--line) 85%, transparent);
}
.u-table td{
  padding:10px; vertical-align:middle;
  border-bottom:1px solid color-mix(in srgb, var(--line) 85%, transparent);
}
.u-table tbody tr:hover{ background: color-mix(in srgb, var(--panel) 96%, var(--line)) }
.u-table th.num, .u-table td.num{ text-align:right; font-variant-numeric: tabular-nums }
.u-table td .filecell{ display:flex; align-items:center; gap:8px }
.u-table td .fname{ font-weight:600 }
.u-table td .fmeta{ color:var(--muted); font-size:12px }
.u-table .empty{ text-align:center; color:var(--muted); padding:26px 10px; font-size:13.5px; }
.empty-icon{ opacity:.35; margin-right:6px }

/* Status pills */
.pill{ display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; font-size:12px; font-weight:600 }
.pill.success{  background:rgba(16,185,129,.12); color:rgb(16,185,129) }
.pill.partial{  background:rgba(245,158,11,.14); color:rgb(217,119,6) }
.pill.failed{   background:rgba(244,63,94,.12);  color:rgb(225,29,72) }
.pill.processing{ background:rgba(59,130,246,.12); color:rgb(37,99,235) }
body[data-theme="dark"] .pill.success{    background:rgba(16,185,129,.14); color:rgba(110,231,183,1) }
body[data-theme="dark"] .pill.partial{    background:rgba(245,158,11,.14); color:rgba(252,211,77,1) }
body[data-theme="dark"] .pill.failed{     background:rgba(244,63,94,.16);  color:rgba(253,164,175,1) }
body[data-theme="dark"] .pill.processing{ background:rgba(59,130,246,.14); color:rgba(147,197,253,1) }

/* Icon button (download) */
.icon-btn.ghost{
  height:28px; width:28px; display:grid; place-items:center;
  border-radius:8px; border:1px solid var(--line);
  background: transparent; color: inherit; cursor:pointer;
  transition: background .15s cubic-bezier(.2,.6,.2,1),
              border-color .15s cubic-bezier(.2,.6,.2,1),
              opacity .15s;
}
.icon-btn.ghost:hover{ background: color-mix(in srgb, var(--panel) 92%, var(--line)) }
.icon-btn.ghost:disabled{ opacity:.35; cursor:not-allowed }

/* Accessibility focus */
.dropcard:focus-visible,
.back-link:focus-visible,
.icon-btn.ghost:focus-visible{
  outline:2px solid color-mix(in srgb, var(--blue) 70%, transparent);
  outline-offset:2px;
}

/* ---------- Workflows empty state polish ---------- */
.wf-empty{
  padding: 28px 16px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  text-align: center;
}
.wf-empty svg{ opacity: .7 }
.wf-empty-title{
  font-weight: 700;
  color: var(--ink);
}
.wf-empty-sub{
  color: var(--muted);
  font-size: 13px;
}
.wf-new-btn{
  transition: background .18s cubic-bezier(.2,.6,.2,1), border-color .18s cubic-bezier(.2,.6,.2,1), box-shadow .18s cubic-bezier(.2,.6,.2,1);
}
.wf-new-btn:hover{
  border-color: var(--line-strong);
  background: color-mix(in srgb, var(--panel) 92%, var(--line));
  box-shadow: var(--shadow);
}

/* ---------- Tiny utility for phone-numbers page ---------- */
.chip{
  display:inline-flex; align-items:center; height:22px; padding:0 8px;
  border:1px solid var(--line); border-radius:999px; background:var(--surface-1); font-size:12px;
}
