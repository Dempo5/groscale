/* apps/web/src/pages/dashboard-ios.css
   Premium, minimalist refinement â€” same layout, better polish.
*/

/* ---------------- Tokens (light/dark) ---------------- */
:root{
  --bg: #f7f8fa;

  --surface-1: #ffffff;  /* chat area */
  --surface-2: #f4f6f8;  /* contacts list */
  --surface-3: #eef2f5;  /* details panel */
  --surface-4: #edf0f4;  /* left rail */

  --text-primary: #14181d;
  --text-secondary: #3c4653;
  --text-muted: #778190;

  --line: #e3e7ee;
  --line-strong: #d3d9e3;

  --accent: #2a74ff;
  --accent-soft: color-mix(in srgb, var(--accent) 12%, transparent);

  --radius-6: 6px;
  --radius-8: 8px;
  --radius-10: 10px;

  --shadow-xs: 0 1px 1px rgba(0,0,0,.04);
  --shadow-sm: 0 1px 2px rgba(0,0,0,.06);
  --shadow-md: 0 6px 18px rgba(0,0,0,.08);

  --fs-12: 12px; --fs-13: 13px; --fs-14: 14px; --fs-15: 15px; --fs-16: 16px;

  --ease-soft: cubic-bezier(.22,.61,.36,1);
}

body[data-theme="dark"]{
  --bg: #0f1114;

  --surface-1: #15181d;
  --surface-2: #1a1f25;
  --surface-3: #1f242c;
  --surface-4: #192027;

  --text-primary: #e7ecf2;
  --text-secondary: #c7cfdb;
  --text-muted: #97a2b2;

  --line: #262c34;
  --line-strong: #323a45;

  --shadow-xs: 0 1px 1px rgba(0,0,0,.25);
  --shadow-sm: 0 1px 2px rgba(0,0,0,.28);
  --shadow-md: 0 8px 24px rgba(0,0,0,.28);
}

/* Base + rhythm */
*{ box-sizing:border-box; }
html,body,#root{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text-primary);
  font: 500 14px/1.5 Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
}
/* micro-interactions globally */
*{
  transition:
    background-color .18s var(--ease-soft),
    color .18s var(--ease-soft),
    border-color .18s var(--ease-soft),
    box-shadow .18s var(--ease-soft),
    transform .18s var(--ease-soft);
}

/* ---------------- Shell + Topbar ---------------- */
.p-shell{ min-height:100vh; display:flex; flex-direction:column; }
.matte{ backdrop-filter: saturate(120%) blur(6px); }

.p-topbar{
  position:sticky; top:0; z-index:20;
  height:54px; display:flex; align-items:center; justify-content:center;
  background: color-mix(in srgb, var(--surface-1) 86%, transparent);
  border-bottom:1px solid var(--line);
}
.brand-center{ font-weight:700; letter-spacing:.2px; }
.left-toggle{
  position:absolute; left:10px; top:50%; transform:translateY(-50%);
}
.top-actions{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  display:flex; align-items:center; gap:10px;
}

.icon-btn{
  height:32px; width:32px; display:grid; place-items:center;
  border:1px solid var(--line); border-radius:var(--radius-8); background:var(--surface-1);
}
.icon-btn.sm{ height:30px; width:30px; }

.profile-btn{ all:unset; cursor:pointer; }
.avatar{
  width:28px; height:28px; border-radius:50%; display:grid; place-items:center;
  font-weight:700; border:1px solid var(--line); background:var(--surface-1);
}
.avatar.small{ width:28px; height:28px; }

.menu{
  position:absolute; right:0; margin-top:8px; padding:6px;
  background:var(--surface-1); border:1px solid var(--line-strong);
  border-radius:10px; box-shadow:var(--shadow-sm);
}
.menu-item{
  display:flex; align-items:center; gap:8px; padding:8px 10px; width:180px;
  border-radius:8px; background:transparent; border:0; color:inherit; cursor:pointer;
}
.menu-item:hover{ background: color-mix(in srgb, var(--surface-1) 90%, var(--surface-3)); }
.menu-sep{ height:1px; background:var(--line); margin:4px 6px; }
.menu-item.danger{ color:#e46a6a; }

/* ---------------- Grid ---------------- */
.p-work.grid{
  display:grid;
  grid-template-columns: 220px 360px 1fr 340px;
  gap:0;
  padding:12px;
}
.rail-closed .p-work.grid,
.p-work.grid.rail-closed{ grid-template-columns: 60px 360px 1fr 340px; }

/* LEFT RAIL */
.rail{
  background:var(--surface-4);
  border-right:1px solid var(--line);
  box-shadow:var(--shadow-xs);
  padding:8px 6px; display:flex; flex-direction:column; gap:6px;
}
.rail.collapsed .rail-item span{ display:none; }
.rail nav{ display:flex; flex-direction:column; gap:4px; }
.rail-item{
  display:flex; align-items:center; gap:10px; height:34px; padding:0 10px;
  color:inherit; text-decoration:none; border-radius:var(--radius-8);
  border:1px solid transparent;
}
.rail-item svg{ min-width:18px; }
.rail-item:hover{ background:color-mix(in srgb, var(--surface-1) 90%, var(--surface-4)); }
.rail-item.active{ border-color:var(--line-strong); }
.rail-foot{ margin-top:auto; padding-top:6px; border-top:1px solid var(--line); }

/* PANELS */
.panel{
  border-top:1px solid var(--line); border-bottom:1px solid var(--line);
  box-shadow:var(--shadow-xs);
}
.panel.list{ background:var(--surface-2); border-left:1px solid var(--line); }
.panel.thread{ background:var(--surface-1); }
.panel.details{ background:var(--surface-3); border-right:1px solid var(--line); }

/* ---------------- LIST ---------------- */
.list{ display:flex; flex-direction:column; }
.list-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px; border-bottom:1px solid var(--line);
}
.list-head .h{ font-weight:700; }
.list-head-actions{ display:flex; align-items:center; gap:8px; }

.search{
  margin:10px 12px; display:flex; align-items:center; gap:8px;
  height:34px; border:1px solid var(--line); background:var(--surface-1);
  padding:0 8px; border-radius:var(--radius-8);
}
.search input{ border:0; outline:none; background:transparent; color:inherit; width:100%; }

.rows{ list-style:none; margin:0; padding:6px 8px; }
.row{
  display:flex; align-items:center; gap:10px; padding:8px; border-radius:var(--radius-8);
  cursor:pointer; border:1px solid transparent; position:relative;
}
.row:hover{ background:color-mix(in srgb, var(--surface-1) 92%, var(--surface-2)); }
.row.selected{
  background:color-mix(in srgb, var(--surface-1) 95%, var(--surface-2));
  border-color:var(--line-strong);
}
.row.selected::before{
  content:""; position:absolute; left:-1px; top:6px; bottom:6px; width:2px; border-radius:2px; background:var(--accent);
}
.meta .name{ font-weight:600; font-size:var(--fs-14); color:var(--text-primary); }
.meta .sub{ color:var(--text-muted); font-size:var(--fs-12); }
.avatar{ width:28px; height:28px; border-radius:50%; display:grid; place-items:center; font-weight:700; border:1px solid var(--line); background:var(--surface-1); }

/* ---------------- THREAD ---------------- */
.thread{ display:flex; flex-direction:column; }
.thread-title{ padding:12px; border-bottom:1px solid var(--line); }
.who{ display:flex; align-items:center; gap:10px; }
.who-name{ font-weight:600; font-size:var(--fs-15); }
.who-sub{ color:var(--text-muted); font-size:var(--fs-12); }

.messages{
  padding:12px; display:flex; flex-direction:column; gap:8px;
  flex:1; /* keeps composer pinned to page bottom */
  min-height:260px;
}
.bubble{
  max-width:min(72ch, 60%);
  display:inline-block;
  padding:8px 10px; border-radius:10px;
  border:1px solid var(--line);
  background:color-mix(in srgb, var(--surface-1) 92%, var(--line));
  animation:msgIn .18s var(--ease-soft) both;
}
.bubble.mine{
  align-self:flex-end;
  background:color-mix(in srgb, #8e97a4 24%, var(--surface-1));
  border-color:color-mix(in srgb, #8e97a4 40%, var(--line));
}
.bubble .stamp{ font-size:11px; color:var(--text-muted); margin-top:4px; }
@keyframes msgIn{ from{opacity:.0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)} }

.composer{
  margin:10px 12px 12px; display:grid; grid-template-columns: 1fr auto auto; gap:8px;
}
.composer input{
  height:36px; border:1px solid var(--line); border-radius:var(--radius-8); padding:0 10px;
  background:var(--surface-1); outline:none; color:inherit;
}

/* ---------------- DETAILS ---------------- */
.group + .group{ border-top:1px solid var(--line); }
.group-title{
  padding:10px 12px; font-size:var(--fs-12); color:var(--text-muted);
  text-transform:uppercase; letter-spacing:.04em;
}
.kv{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border-bottom:1px solid var(--line);
}
.kv:last-child{ border-bottom:0; }
.kv label{ color:var(--text-muted); font-size:11px; letter-spacing:.02em; text-transform:uppercase; }
.copy-row{ display:inline-flex; align-items:center; gap:8px; }

/* ---------------- Buttons & chips ---------------- */
.btn-sm{
  height:32px; padding:0 10px; border:1px solid var(--line);
  border-radius:var(--radius-8); background:var(--surface-1); cursor:pointer;
}
.btn-sm:hover{ background:color-mix(in srgb, var(--surface-1) 92%, var(--surface-2)); }

.btn-primary{
  height:32px; padding:0 12px; border-radius:var(--radius-8);
  border:1px solid color-mix(in srgb, var(--accent) 55%, var(--line));
  background:var(--accent); color:#fff; cursor:pointer;
}
.btn-primary:disabled{ opacity:.6; cursor:not-allowed; }
.btn-primary:not(:disabled):hover{ filter:brightness(1.05); }
.btn-primary.is-ready:hover{ box-shadow:0 0 0 3px var(--accent-soft); }

.chip{
  height:24px; display:inline-flex; align-items:center; gap:6px;
  padding:0 8px; border:1px solid var(--line); border-radius:999px;
  background:var(--surface-1); font-size:var(--fs-12); cursor:pointer;
}
.chip:hover{ background:color-mix(in srgb, var(--surface-1) 92%, var(--surface-3)); }

/* Focus ring for a11y */
:focus-visible{
  outline:0;
  box-shadow: var(--shadow-xs), 0 0 0 3px var(--accent-soft);
  border-color: var(--line-strong);
}