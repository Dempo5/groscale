/* =============== GroScales Neo (one stylesheet) =============== */
/* System font w/ Apple priority */
:root {
  --font: system-ui, -apple-system, "SF Pro Text", "Segoe UI", Inter, Roboto, Arial, sans-serif;

  /* light theme */
  --bg: #f6f8fb;
  --surface: #ffffffcc;            /* translucent white */
  --surface-strong: #ffffffee;
  --line: #091e4214;               /* soft hairline */
  --muted: #5f6b7a;
  --text: #0f172a;

  --blue-400: #2f8be6;
  --blue-500: #1f76d0;
  --blue-600: #0f63bf;

  --radius-outer: 14px;            /* container */
  --radius: 10px;                  /* elements (sharper than bubbly 16px) */
  --shadow-1: 0 10px 30px rgba(15, 20, 40, .08);
  --shadow-2: 0 18px 48px rgba(15, 20, 40, .12);

  --glass-blur: 12px;
}

[data-theme="dark"] {
  --bg: #0b0f15;
  --surface: rgba(16, 20, 28, .55);
  --surface-strong: rgba(18, 22, 30, .68);
  --line: rgba(255,255,255,.08);
  --muted: #8ea3b5;
  --text: #e8eef6;

  --blue-400: #4aa4ff;
  --blue-500: #308cf1;
  --blue-600: #1e73dd;

  --shadow-1: 0 14px 34px rgba(0,0,0,.35);
  --shadow-2: 0 24px 60px rgba(0,0,0,.45);
}

/* ---------- Page Shell ---------- */
.p-shell{
  min-height:100dvh;
  background:
    radial-gradient(900px 600px at 18% 8%, rgba(58,92,241,.08), transparent 55%),
    radial-gradient(800px 520px at 100% 100%, rgba(28,187,255,.07), transparent 60%),
    var(--bg);
  color:var(--text);
  font: 500 14px/1.55 var(--font);
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}

/* ---------- Topbar (glass) ---------- */
.p-topbar{
  position:sticky; top:0; z-index:20;
  height:60px; display:flex; align-items:center; justify-content:space-between;
  padding:0 18px;
  border-bottom:1px solid var(--line);
  background:linear-gradient(to bottom, var(--surface-strong), var(--surface));
  backdrop-filter: blur(var(--glass-blur));
}

/* ---------- Left rail (glass) ---------- */
.nav-rail, .sidenav, .left-rail{
  width:64px; flex:0 0 64px;
  border-right:1px solid var(--line);
  background:linear-gradient(180deg, var(--surface-strong), var(--surface));
  backdrop-filter: blur(var(--glass-blur));
}
.nav-rail .icon, .sidenav .icon, .left-rail .icon{
  display:grid; place-items:center;
  width:38px; height:38px; margin:10px auto;
  border-radius:12px; border:1px solid var(--line);
  background:color-mix(in srgb, var(--surface) 80%, transparent);
  box-shadow: var(--shadow-1);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.nav-rail .icon:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }

/* ---------- Main work grid ---------- */
.p-work{
  display:grid;
  grid-template-columns: 320px 1fr 360px;   /* middle sits slightly left-heavy */
  gap:16px; padding:16px;
}
@media (max-width: 1200px){ .p-work{ grid-template-columns: 300px 1fr } .details{ display:none } }
@media (max-width: 860px){  .p-work{ grid-template-columns: 1fr } }

/* ---------- Panels ---------- */
.panel{
  border:1px solid var(--line);
  border-radius:var(--radius-outer);
  background:var(--surface);
  box-shadow: var(--shadow-1);
}
.panel-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 14px; border-bottom:1px solid var(--line);
}
.title{ font-weight:800; letter-spacing:.2px }
.small{ font-size:13px; color:var(--muted) }

/* Search */
.search{ display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid var(--line) }
.search input{
  width:100%; height:36px; padding:0 10px; border-radius:10px; outline:none;
  border:1px solid var(--line); background:color-mix(in srgb, var(--surface) 86%, transparent);
  color:var(--text);
}

/* ---------- List (left column) ---------- */
.rows{ list-style:none; margin:0; padding:0 }
.row{
  display:flex; gap:12px; align-items:center;
  padding:12px 14px; cursor:pointer; border-bottom:1px solid var(--line);
  transition: background .16s ease, outline-color .16s ease;
}
.row:hover{ background:color-mix(in srgb, var(--surface) 90%, transparent); }
.row.selected{
  background:color-mix(in srgb, var(--blue-500) 9%, var(--surface));
  outline:1px solid color-mix(in srgb, var(--blue-500) 25%, transparent);
}
.avatar{
  width:36px; height:36px; border-radius:10px; display:grid; place-items:center; font-weight:800;
  border:1px solid var(--line);
  background:linear-gradient(145deg, color-mix(in srgb, var(--surface) 85%, #000), var(--surface));
}

/* ---------- Thread (middle) ---------- */
.thread{ display:flex; flex-direction:column; }
.thread-head{ display:flex; align-items:center; gap:12px; padding:12px; border-bottom:1px solid var(--line) }
.thread .spacer{ flex:1 }
.presence{ font-size:12px; color: color-mix(in srgb, #31d481 82%, var(--text)); }

/* Messages area */
.messages{
  flex:1; overflow:auto; padding:16px;
  display:grid; gap:10px;
  scroll-behavior: smooth;
}

/* Message bubble geometry (sharper + premium) */
.bubble{
  position:relative;
  max-width:72%;
  padding:10px 12px;
  border-radius:12px;              /* sharper than 16px */
  border:1px solid var(--line);
  background: color-mix(in srgb, var(--surface) 92%, transparent);
  box-shadow: 0 1px 0 rgba(255,255,255,.35) inset; /* subtle light outline */
}
.bubble.mine{
  margin-left:auto;
  color:#fff;
  background:
    linear-gradient(180deg, color-mix(in srgb, var(--blue-500) 94%, transparent), color-mix(in srgb, var(--blue-600) 88%, transparent)),
    linear-gradient(180deg, rgba(255,255,255,.14), transparent); /* hint of sheen */
  border:1px solid color-mix(in srgb, var(--blue-600) 45%, transparent);
  box-shadow:
    0 1px 0 rgba(255,255,255,.22) inset,
    0 10px 28px color-mix(in srgb, var(--blue-600) 14%, transparent);
}

/* Moving light sweep on hover (subtle) */
.bubble.mine::before{
  content:""; position:absolute; inset:0;
  background: linear-gradient(120deg, rgba(255,255,255,.28), transparent 70%);
  mix-blend-mode: screen; opacity:0; transform: translateX(-30%);
  transition: opacity .25s ease, transform .25s ease;
  pointer-events:none;
}
.bubble.mine:hover::before{ opacity:.9; transform: translateX(28%); }

.stamp{ font-size:11px; color:var(--muted); margin-top:6px }

/* Composer */
.composer{
  display:grid; grid-template-columns: 1fr auto auto; gap:8px;
  padding:12px; border-top:1px solid var(--line);
}
.composer input{
  height:40px; border-radius:10px; border:1px solid var(--line);
  background:color-mix(in srgb, var(--surface) 88%, transparent);
  color:var(--text); padding:0 10px; outline:none;
}

/* ---------- Buttons ---------- */
.btn { position:relative; height:36px; padding:0 14px; border-radius:10px; cursor:pointer;
  border:1px solid var(--line); background:var(--surface-strong); color:var(--text);
  transition: transform .16s ease, box-shadow .16s ease, background .16s ease;
}
.btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }

.btn.primary{
  border:0; color:#fff;
  background: linear-gradient(180deg, var(--blue-400), var(--blue-600));
  box-shadow: 0 12px 30px color-mix(in srgb, var(--blue-500) 35%, transparent);
}
.btn.primary::before{
  /* animated light sweep */
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background: linear-gradient(120deg, rgba(255,255,255,.32), transparent 70%);
  opacity:0; transform: translateX(-30%);
  transition: opacity .25s ease, transform .25s ease;
}
.btn.primary:hover::before{ opacity:1; transform: translateX(30%); }

/* ---------- Details (right column) ---------- */
.details{ display:flex; flex-direction:column; gap:12px; }
.card{
  border:1px solid var(--line);
  border-radius:12px;
  background:var(--surface);
  box-shadow: var(--shadow-1);
  padding:12px;
}
.label{ font-size:12px; color:var(--muted); margin-bottom:6px; letter-spacing:.2px }

.kv{ display:flex; align-items:center; gap:10px; padding:8px 0; border-bottom:1px dashed var(--line) }
.kv:last-child{ border-bottom:0 }
.kv .copy { margin-left:auto }
.copy{
  height:28px; padding:0 10px; border-radius:999px;
  border:1px solid var(--line); background:color-mix(in srgb, var(--surface) 86%, transparent);
  font-size:12px; cursor:pointer;
}

/* Chips */
.chips{ display:flex; gap:6px; flex-wrap:wrap }
.chip{ padding:4px 8px; border-radius:999px; border:1px solid var(--line); font-size:12px; background:var(--surface) }

/* ---------- Motion: physicsy float-in ---------- */
@media (prefers-reduced-motion: no-preference){
  @keyframes floatIn {
    0%   { opacity:0; transform: translateY(8px) scale(.985); }
    60%  { opacity:1; transform: translateY(-2px) scale(1.01); }
    100% { transform: translateY(0) scale(1); }
  }
  .appear { animation: floatIn .48s cubic-bezier(.17,.84,.44,1) both; }
}

/* ---------- Utilities ---------- */
.ghost{ background:color-mix(in srgb, var(--surface) 82%, transparent); }
.ok    { color: color-mix(in srgb, #20c997 92%, var(--text)) }
.error { color: #ff6b6b }
